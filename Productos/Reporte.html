<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.0.36">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Análisis de Partidas de Ajedrez</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
span.underline{text-decoration: underline;}
div.column{display: inline-block; vertical-align: top; width: 50%;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
</style>


<script src="Reporte_files/libs/clipboard/clipboard.min.js"></script>
<script src="Reporte_files/libs/quarto-html/quarto.js"></script>
<script src="Reporte_files/libs/quarto-html/popper.min.js"></script>
<script src="Reporte_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="Reporte_files/libs/quarto-html/anchor.min.js"></script>
<link href="Reporte_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="Reporte_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="Reporte_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="Reporte_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="Reporte_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">


</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Análisis de Partidas de Ajedrez</h1>
</div>



<div class="quarto-title-meta">

    
    
  </div>
  

</header>

<section id="introducción" class="level2">
<h2 class="anchored" data-anchor-id="introducción">Introducción</h2>
<section id="contexto" class="level3">
<h3 class="anchored" data-anchor-id="contexto">Contexto</h3>
<p>El ajedrez moderno es un juego de mesa, el cual, desde su origen oriental, terminó de asentarse completamente a inicios del siglo XVI en el continente europeo. Desde esa época hasta el día de hoy, se ha convertido en un deporte reconocido mundialmente en el que se han realizado una inmensa cantidad de competiciones.</p>
<p>Una partida de ajedrez se disputa entre dos jugadores, uno contra uno; cada uno posee 16 piezas, cada una con su propia particularidad, siendo las de un jugador de color claro, llamadas <em>blancas</em>, y las de su oponente de color oscuro, llamadas <em>negras</em>. Las piezas se mueven sobre un tablero de ajedrez cuadrado de 64 casillas. El ajedrez no es un juego de azar, sino un juego racional y de estrategia, ya que cada jugador decidirá el movimiento de sus piezas en cada turno. Comienza a jugar quien lleve las blancas, lo que le concede una ventaja pequeña pero esencial en los niveles altos de competición.</p>
<p>En la siguiente imagen se da una representación visual de lo descrito al inicio del párrafo anterior:</p>
<p><img src="images/tablero%20lichess1.JPG" class="img-fluid" width="375"></p>
</section>
<section id="planteamiento-del-caso." class="level3">
<h3 class="anchored" data-anchor-id="planteamiento-del-caso.">Planteamiento del caso.</h3>
<p>Hoy en día existen páginas y plataformas en línea para practicar, disfrutar y competir en este aclamado juego de estrategia.</p>
<p>Existen determinados factores que pueden afectar o predecir que un jugador gane a otro, ya sea el color de sus piezas, el Elo de los jugadores (correspondiente al nivel competitivo que presenta un jugador), la cantidad de turnos que dura una partida, el tipo de partida, entre otros.</p>
<p>Resulta relevante analizar estos factores, con motivo de estimar cuán equilibrado realmente se encuentra este deporte y su sistema de emperajemientos , si existe tendencia a un resultado debido a un factor específico y cómo varían las partidas dependiendo del nivel de los jugadores, ya que en partidas se enfrenta a jugadores de un nivel competitivo similar.</p>
<p>¿Es este juego realmente equilibrado o se encuentra sesgado en favor de uno de los bandos? ¿Influye el color del equipo en una partida de larga duración? ¿Es el Elo un sistema eficaz para medir el nivel de competencia de un jugador? ¿Influye el Elo de los jugadores en algunos resultados de la partida?</p>
<p>Con objetivo de aclarar estas incógnitas, en este proyecto realizaremos una exploración de los datos de distintas partidas de ajedrez, recabadas en la plataforma en línea “Lichess”, la cual es una plataforma en la que se disputan partidas y torneos de ajedrez diariamente. Analizaremos algunos de los factores que podrían influenciar en la victoria de un jugador por sobre otro y estimar qué tan equilibrado se encuentra este deporte.</p>
<p>Este trabajo se encuentra dividido en tres secciones: En la primera sección presentaremos y describiremos los datos y variables que serán utilizadas y los métodos que aplicaremos para su análisis. En la segunda sección, mostraremos los resultados obtenidos, organizados en base a las variables de interés. Para finalizar, en la tercera sección, presentaremos las conclusiones acerca de las variables que fueron llevadas al análisis y su influencia en el resultado de una partida.</p>
</section>
</section>
<section id="presentación-de-los-datos." class="level2">
<h2 class="anchored" data-anchor-id="presentación-de-los-datos.">Presentación de los datos.</h2>
<div class="cell">

</div>
<p>Dentro de esta sección, daremos a conocer las variables que utilizaremos, además de los métodos que aplicaremos para su análisis.</p>
<p>En la siguiente tabla, se presentan las distintas variables de la base de datos con las que trabajaremos, su tipo y una descripción para entender mejor cómo funciona esta.</p>
<div class="cell">

</div>
<div class="cell">

</div>
<div class="cell">
<div class="cell-output-display">

<div id="nwepflrpmj" style="overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

#nwepflrpmj .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#nwepflrpmj .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#nwepflrpmj .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#nwepflrpmj .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#nwepflrpmj .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#nwepflrpmj .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#nwepflrpmj .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#nwepflrpmj .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#nwepflrpmj .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#nwepflrpmj .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#nwepflrpmj .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#nwepflrpmj .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
}

#nwepflrpmj .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#nwepflrpmj .gt_from_md > :first-child {
  margin-top: 0;
}

#nwepflrpmj .gt_from_md > :last-child {
  margin-bottom: 0;
}

#nwepflrpmj .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#nwepflrpmj .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#nwepflrpmj .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#nwepflrpmj .gt_row_group_first td {
  border-top-width: 2px;
}

#nwepflrpmj .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#nwepflrpmj .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#nwepflrpmj .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#nwepflrpmj .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#nwepflrpmj .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#nwepflrpmj .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#nwepflrpmj .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#nwepflrpmj .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#nwepflrpmj .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#nwepflrpmj .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-left: 4px;
  padding-right: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#nwepflrpmj .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#nwepflrpmj .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#nwepflrpmj .gt_left {
  text-align: left;
}

#nwepflrpmj .gt_center {
  text-align: center;
}

#nwepflrpmj .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#nwepflrpmj .gt_font_normal {
  font-weight: normal;
}

#nwepflrpmj .gt_font_bold {
  font-weight: bold;
}

#nwepflrpmj .gt_font_italic {
  font-style: italic;
}

#nwepflrpmj .gt_super {
  font-size: 65%;
}

#nwepflrpmj .gt_footnote_marks {
  font-style: italic;
  font-weight: normal;
  font-size: 75%;
  vertical-align: 0.4em;
}

#nwepflrpmj .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#nwepflrpmj .gt_indent_1 {
  text-indent: 5px;
}

#nwepflrpmj .gt_indent_2 {
  text-indent: 10px;
}

#nwepflrpmj .gt_indent_3 {
  text-indent: 15px;
}

#nwepflrpmj .gt_indent_4 {
  text-indent: 20px;
}

#nwepflrpmj .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table">
  <thead class="gt_header">
    <tr>
      <td colspan="3" class="gt_heading gt_title gt_font_normal" style="">Tabla 1. Base de datos de Partidas de ajedrez en línea</td>
    </tr>
    <tr>
      <td colspan="3" class="gt_heading gt_subtitle gt_font_normal gt_bottom_border" style="">Provenientes de la plataforma Lichess. 20058 observaciones.</td>
    </tr>
  </thead>
  <thead class="gt_col_headings">
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col">Variable</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col">Tipo</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col">Descripción</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td class="gt_row gt_left">Turnos</td>
<td class="gt_row gt_left">Cuantitativa discreta</td>
<td class="gt_row gt_left">Corresponde a la cantidad de turnos que duró la partida.</td></tr>
    <tr><td class="gt_row gt_left">Ganador</td>
<td class="gt_row gt_left">Cualitativa nominal</td>
<td class="gt_row gt_left">Corresponde al equipo ganador de la partida, ya sea blancas o negras. En caso de haber un empate, no existe ganador, por lo que queda clasificado como 'empate'.</td></tr>
    <tr><td class="gt_row gt_left">Elo Blancas</td>
<td class="gt_row gt_left">Cuantitativa discreta</td>
<td class="gt_row gt_left">Puntos de clasificación Elo del contrincante del equipo blanco. Representa el nivel competitivo del jugador dentro de la plataforma.</td></tr>
    <tr><td class="gt_row gt_left">Elo Negras</td>
<td class="gt_row gt_left">Cuantitativa discreta</td>
<td class="gt_row gt_left">Puntos de clasificación Elo del contrincante del equipo negro. Representa el nivel competitivo del jugador dentro de la plataforma.</td></tr>
    <tr><td class="gt_row gt_left">Diferencia de Elo</td>
<td class="gt_row gt_left">Cuantitativa discreta</td>
<td class="gt_row gt_left">Diferencia de Elo entre los contrincantes. Si su valor es positivo, indica que el jugador del equipo blanco tiene mayor Elo, y viceversa.</td></tr>
    <tr><td class="gt_row gt_left">Elo promedio</td>
<td class="gt_row gt_left">Cuantitativa continua</td>
<td class="gt_row gt_left">Corresponde al promedio del Elo entre los dos jugadores.</td></tr>
  </tbody>
  <tfoot class="gt_sourcenotes">
    <tr>
      <td class="gt_sourcenote" colspan="3">Fuente: Kaggle.com</td>
    </tr>
  </tfoot>
  
</table>
</div>
</div>
</div>
<p>Para el caso de los métodos que utilizaremos, nos basaremos principalmente en el uso de gráficos que representen la relación entre las distintas variables, con objetivo de responder a las preguntas hechas en el apartado de la introducción:</p>
<p>-Determinar si es el Elo un sistema eficaz para medir el nivel de competencia de un jugador y la efectividad del emparejamiento.</p>
<p>-Conocer si Influye la diferencia de Elo de los jugadores en el ganador de la partida.</p>
<p>-Determinar si este juego es realmente equilibrado o se encuentra sesgado en favor de uno de los bandos.</p>
<p>-Saber si Influye el color del equipo en una partida de larga duración.</p>
</section>
<section id="análisis-de-resultados." class="level2">
<h2 class="anchored" data-anchor-id="análisis-de-resultados.">Análisis de resultados.</h2>
<p>Dentro de esta sección, procederemos con el análisis de datos y la presentación de los resultados obtenidos en base a la observación de gráficas.</p>
<p>Respecto al sistema de puntuación competitivo Elo, resulta relevante aclarar que, dentro de la plataforma Lichess, un jugador con un rango entre 1300 y 1700 se considera promedio, bajo ese rango se puede decir que el jugador es un principiante, mientras que por encima es uno intermedio que empieza a tener un nivel avanzado, y más arriba de 2000 de Elo, se podría considerar un jugador con un nivel bastante avanzado.</p>
<p>A continuación, en la Figura 1, nos encontramos con un gráfico de puntos en el que podemos observar la relación entre el nivel competitivo de dos jugadores en una partida. Cada punto representa una partida, mientras que su posición indica el Elo de cada contrincante:</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="Reporte_files/figure-html/unnamed-chunk-5-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Podemos observar claras tendencias de que se empareja a jugadores con un Elo similar entre sí. Existe un patrón de proporción directa entre el nivel competitivo de un jugador respecto a su contrincante.</p>
<p>Podemos observar, además, una cruz formada con centro, marcado como un punto de color rojo, en las coordenadas (1500, 1500) aproximadamente. También es posible apreciar, mediante esa cruz, que existe una cierta tendencia a emparejar a un jugador con un Elo de 1500 aproximadamente contra otro que puede tener un Elo bastante superior como inferior.</p>
<p>En el siguiente histograma de la Figura 2 podemos entender de mejor manera lo estimado en el párrafo anterior:</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="Reporte_files/figure-html/unnamed-chunk-6-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Podemos notar, en base a la figura anterior, que existe una tendencia a emparejar partidas cuyo promedio de Elo entre los jugadores enfrentados sea cercano a 1500.</p>
<p>Cambiando de enfoque, en las siguientes figuras nos centraremos en analizar la relación entre el equipo ganador de la partida y distintas variables.</p>
<p>En la figura 3 observaremos la relación entre la diferencia de Elo y el equipo ganador:</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="Reporte_files/figure-html/unnamed-chunk-7-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Podemos observar que, para el caso en que el equipo ganador es el de las blancas, la diferencia de Elo se concentra mayoritariamente en los valores positivos, mientras que, por el caso contrario, la diferencia de Elo tiende a concentrarse en valores negativos. En el caso de empate, la distribución de la diferencia de Elo se encuentra más equilibrada y centrada en el valor cero. Todo lo anterior nos indicaría que un jugador con mayor nivel competitivo suele ganarle a uno de menor nivel competitivo.</p>
<p>Siguiendo con el análisis de respecto al equipo ganador, en la figura 4 observaremos la relación entre el número de turnos que dura una partida y el equipo ganador en cuestión:</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="Reporte_files/figure-html/unnamed-chunk-8-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Podemos notar que en su mayoría, las partidas no suelen durar más de 100 turnos antes de que gane un jugador. Además, la distribución de los turnos es bastante similar para ambos casos. El caso de <em>Empate</em> es una excepción; esto se puede deber a la fatiga mental generada a lo largo de la partida.</p>
<p>Para terminar con esta sección, en la siguiente figura observaremos la relación entre el número de turnos y la diferencia de Elo:</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="Reporte_files/figure-html/unnamed-chunk-9-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Podemos apreciar una forma de “<em>bulbo”</em> generada por las observaciones de la gráfica, sin embargo, siempre centrado en cero. En base a la gráfica, podemos estimar que mientras mayor es la diferencia de Elo, menos turnos duran las partidas, mientras que menor es la diferencia de Elo es más probable que las partidas duren una cantidad de turnos más extensa, sin embargo, también existe una buena cantidad de partidas en las que la diferencia de Elo era baja y la cantidad de turnos que duró también lo era.</p>
<div class="cell">

</div>
<div class="cell">

</div>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    setTimeout(function() {
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      let href = ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const cites = ref.parentNode.getAttribute('data-cites').split(' ');
    tippyHover(ref, function() {
      var popup = window.document.createElement('div');
      cites.forEach(function(cite) {
        var citeDiv = window.document.createElement('div');
        citeDiv.classList.add('hanging-indent');
        citeDiv.classList.add('csl-entry');
        var biblioDiv = window.document.getElementById('ref-' + cite);
        if (biblioDiv) {
          citeDiv.innerHTML = biblioDiv.innerHTML;
        }
        popup.appendChild(citeDiv);
      });
      return popup.innerHTML;
    });
  }
});
</script>
</div> <!-- /content -->



</body></html>